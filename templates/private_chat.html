{% extends "layout.html" %}
{% block content %}
<style>
    .chat-box {
        height: 400px;
        overflow-y: auto;
        border: 1px solid #ddd;
        padding: 10px;
        background: #f8f9fa;
    }
    .message {
        padding: 5px;
        margin-bottom: 5px;
        border-radius: 5px;
        background: #ddd;
    }
</style>

<div class="container mt-4">
    <h3 class="text-center">Chat với {{ friend.username }}</h3>
    <form method="POST" action="{{ url_for('chat_friend', friend_id=friend.id) }}">
    <div class="chat-box mb-3" id="chat-box">
        <h4>Tin nhắn</h4>
            <div id="chat-box" class="border p-3 mb-3" style="height: 300px; overflow-y: scroll;">
                {% for message in messages %}
                    <div class="mb-2">
                        <strong>{{ 'Bạn' if message.sender_id == session['id'] else friend.username }}:</strong> {{ message.message }}
                        <small class="text-muted">{{ message.sent_at }}</small>
                    </div>
                {% endfor %}
            </div>
    </div>
    <div class="input-group">
        <input type="text" id="message" name="message" class="form-control" placeholder="Nhập tin nhắn...">
        <button class="btn btn-primary" type="submit">Gửi</button>
    </div>
    </form>
</div>
{% endblock %}